<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <!-- For iOS -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="For Reine">
  <!-- For Android -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#ec4899">
  <!-- Link to manifest -->
  <link rel="manifest" href="manifest.json">
  <!-- Apple Touch Icon -->
  <link rel="apple-touch-icon" href="assets/icons/apple-touch-icon.png">
  <title>Message | For Reine</title>
  <link rel="stylesheet" href="assets/css/style.css" />
  <style>
    .message-nav {
      display: flex;
      gap: 8px;
      padding: 12px 16px;
      position: relative;
      z-index: 2;
      background: rgba(255, 255, 255, 0.25);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.35);
    }

    .message-nav__link {
      flex: 1;
      text-align: center;
      padding: 10px 12px;
      border-radius: 14px;
      text-decoration: none;
      font-weight: 900;
      color: rgba(17, 24, 39, 0.75);
      background: rgba(255, 255, 255, 0.55);
      border: 1px solid rgba(17, 24, 39, 0.1);
      transition: all 0.2s ease;
    }

    .message-nav__link:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(17, 24, 39, 0.1);
    }

    .message-nav__link.is-active {
      border: 0;
      color: white;
      background: linear-gradient(135deg, rgba(236, 72, 153, 0.95), rgba(139, 92, 246, 0.95));
    }

    .message-screen {
      display: block;
      padding: 14px 16px 18px;
      overflow: auto;
      position: relative;
      z-index: 2;
      height: calc(100% - 60px);
    }

    .message-content {
      background: var(--card);
      border: 1px solid rgba(255, 255, 255, .45);
      border-radius: var(--radius);
      padding: 24px;
      margin-top: 20px;
      box-shadow: 0 10px 30px rgba(17, 24, 39, .10);
      line-height: 1.6;
      font-size: 16px;
    }

    .message-signature {
      text-align: right;
      margin-top: 30px;
      font-style: italic;
      font-weight: 900;
      color: var(--accent);
    }

    /* Game card styles for the Secret Love Notes */
    .gameCard {
      border-radius: 24px;
      overflow: hidden;
      background: var(--card);
      border: 1px solid rgba(255, 255, 255, 0.45);
      box-shadow: 0 12px 32px rgba(17, 24, 39, 0.12);
      transition: all 0.3s ease;
      position: relative;
      margin: 20px 0;
    }

    .gameCard:hover {
      transform: translateY(-4px);
      box-shadow: 0 18px 42px rgba(17, 24, 39, 0.18);
    }

    .gameCard__header {
      padding: 20px 20px 16px;
      position: relative;
      overflow: hidden;
      background: linear-gradient(135deg, rgba(255, 182, 193, 0.15), rgba(255, 105, 180, 0.1));
    }

    .gameCard__title {
      font-size: 20px;
      font-weight: 950;
      margin: 0 0 8px;
      color: var(--text);
      letter-spacing: 0.2px;
    }

    .gameCard__subtitle {
      font-size: 13px;
      color: var(--muted);
      line-height: 1.4;
      margin: 0;
    }

    .gameCard__icon {
      position: absolute;
      top: 16px;
      right: 16px;
      font-size: 32px;
      opacity: 0.15;
      color: #ff69b4;
    }

    .gameCard__content {
      padding: 0 20px 20px;
    }

    .messageInput {
      width: 100%;
      border-radius: 14px;
      border: 2px solid rgba(236, 72, 153, 0.3);
      background: rgba(255, 255, 255, 0.8);
      padding: 14px 16px;
      font-size: 16px;
      outline: none;
      margin-bottom: 12px;
      transition: all 0.2s ease;
    }

    .messageInput:focus {
      border-color: rgba(236, 72, 153, 0.6);
      box-shadow: 0 0 0 4px rgba(236, 72, 153, 0.15);
    }

    .gameControls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 16px;
    }

    .btn-game {
      padding: 10px 20px;
      border-radius: 14px;
      border: 0;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      color: white;
      font-weight: 900;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .btn-game:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(236, 72, 153, 0.3);
    }

    .btn-game.secondary {
      background: rgba(17, 24, 39, 0.1);
      color: var(--text);
    }

    .loveMessages {
      max-height: 300px;
      overflow-y: auto;
      margin-top: 16px;
      padding-right: 8px;
    }

    .loveMessage {
      background: rgba(255, 255, 255, 0.7);
      border-radius: 14px;
      padding: 12px 16px;
      margin-bottom: 10px;
      border-left: 4px solid rgba(236, 72, 153, 0.6);
      position: relative;
      animation: fadeIn 0.5s ease;
    }

    .loveMessage:before {
      content: '‚ù§Ô∏è';
      position: absolute;
      left: -12px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 12px;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .floatA {
      animation: floatA 5.6s ease-in-out infinite;
    }

    @keyframes floatA {
      0%, 100% { transform: translateY(0) rotate(-.2deg); }
      50% { transform: translateY(-6px) rotate(.3deg); }
    }
  </style>
</head>
<body>
  <main class="app" aria-label="Message">
    <div class="phone" role="application" aria-label="Message for Reine">
      <div class="bgParticles" id="bgParticles" aria-hidden="true"></div>

      <nav class="message-nav" aria-label="Main navigation">
        <a href="gallery.html" class="message-nav__link">Gallery</a>
        <a href="games.html" class="message-nav__link">Games</a>
        <a href="message.html" class="message-nav__link is-active">Message</a>
      </nav>

      <section class="message-screen">
        <!-- Secret Love Notes Game (moved from games.html) -->
        <article class="gameCard floatA">
          <div class="gameCard__header">
            <h3 class="gameCard__title">Secret Love Notes</h3>
            <p class="gameCard__subtitle">Leave sweet messages for each other</p>
            <div class="gameCard__icon">üíå</div>
          </div>
          <div class="gameCard__content">
            <input class="messageInput" id="messageInput" type="text" placeholder="Type a sweet message for your love..." maxlength="100" />
            <div class="gameControls">
              <button class="btn-game" id="sendMessage" type="button">Send Love üíù</button>
              <button class="btn-game secondary" id="clearMessages" type="button">Clear</button>
            </div>
            <div class="loveMessages" id="loveMessages">
              <!-- Messages will appear here -->
            </div>
          </div>
        </article>

        <div class="card card--hero">
          <h2 class="h2">A Message for You</h2>
          <p class="sub">From the deepest part of my heart</p>
        </div>

        <div class="message-content">
          <p>My dearest Reine,</p>
          
          <p>Every day with you feels like a beautiful dream that I never want to wake up from. Your smile lights up my world, your laughter is my favorite melody, and your love is the greatest gift I've ever received.</p>
          
          <p>I created this little space to show you how much you mean to me. Every photo, every memory, every moment we've shared is precious to me. You've brought so much joy, love, and meaning into my life.</p>
          
          <p>No matter where life takes us, know that my love for you will only grow stronger with each passing day. You are my everything, my always, my forever.</p>
          
          <div class="message-signature">
            <p>With all my love,</p>
            <p>Always yours ‚ù§</p>
          </div>
        </div>
      </section>

      <footer class="bottombar" aria-label="Footer">
        <div class="bottombar__dot"></div>
      </footer>
    </div>
  </main>

  <script>
    // Ensure page starts at top
    window.scrollTo(0, 0);
    document.documentElement.scrollTop = 0;

    // Background particles with enhanced emojis
    (() => {
      function spawnBgParticle() {
        const bgParticles = document.getElementById('bgParticles');
        if (!bgParticles) return;
        if (window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches) return;

        const el = document.createElement('span');
        el.className = 'bgParticle';

        // Enhanced emoji selection with more variety
        const heartEmojis = ['‚ù§Ô∏è', 'üíô', 'üñ§', '‚ù£Ô∏è', 'üíï', 'üíû', 'üíì', 'üíó', 'üíñ', 'üíò', 'üíù', 'üíü', '‚ô•Ô∏è', 'üî•', 'üíå'];
        const roseEmojis = ['üåπ', 'üå∏', 'üíê', 'üå∫', 'üå∑', 'üåº'];
        const allEmojis = [...heartEmojis, ...roseEmojis];
        
        const pick = Math.random();
        el.textContent = allEmojis[Math.floor(Math.random() * allEmojis.length)];

        const x = Math.random() * 100;
        const size = 14 + Math.random() * 20;
        const dur = 5.5 + Math.random() * 5.5;
        const drift = (-16 + Math.random() * 32).toFixed(2) + 'px';
        const rot = (-18 + Math.random() * 36).toFixed(2) + 'deg';

        el.style.setProperty('--x', x.toFixed(2) + '%');
        el.style.setProperty('--size', size.toFixed(0) + 'px');
        el.style.setProperty('--dur', dur.toFixed(2) + 's');
        el.style.setProperty('--drift', drift);
        el.style.setProperty('--rot', rot);

        bgParticles.appendChild(el);

        window.setTimeout(() => {
          el.remove();
        }, Math.ceil(dur * 1000) + 200);
      }

      function startParticles() {
        const bgParticles = document.getElementById('bgParticles');
        if (!bgParticles) return;
        for (let i = 0; i < 8; i++) spawnBgParticle();
        window.setInterval(spawnBgParticle, 420);
      }

      startParticles();
    })();

    // Secret Love Messages Implementation
    (() => {
      const messageInput = document.getElementById('messageInput');
      const sendMessage = document.getElementById('sendMessage');
      const clearMessages = document.getElementById('clearMessages');
      const loveMessages = document.getElementById('loveMessages');

      function saveMessages(messages) {
        localStorage.setItem('loveMessages', JSON.stringify(messages));
      }

      function loadMessages() {
        const saved = localStorage.getItem('loveMessages');
        return saved ? JSON.parse(saved) : [];
      }

      function renderMessages() {
        const messages = loadMessages();
        loveMessages.innerHTML = '';
        
        // Show empty state if no messages
        if (messages.length === 0) {
          const emptyMsg = document.createElement('div');
          emptyMsg.className = 'loveMessage';
          emptyMsg.style.opacity = '0.6';
          emptyMsg.style.fontStyle = 'italic';
          emptyMsg.innerHTML = `
            <div style="font-weight: 700; margin-bottom: 4px;">The love notes box is empty...</div>
            <div style="font-size: 11px; color: var(--muted);">Write your first sweet message above üíù</div>
          `;
          loveMessages.appendChild(emptyMsg);
          return;
        }
        
        messages.forEach(msg => {
          const messageEl = document.createElement('div');
          messageEl.className = 'loveMessage';
          messageEl.innerHTML = `
            <div style="font-weight: 800; margin-bottom: 4px;">${msg.text}</div>
            <div style="font-size: 11px; color: var(--muted);">${msg.time}</div>
          `;
          loveMessages.appendChild(messageEl);
        });
        
        loveMessages.scrollTop = loveMessages.scrollHeight;
      }

      sendMessage.addEventListener('click', () => {
        const text = messageInput.value.trim();
        if(text) {
          const messages = loadMessages();
          messages.push({
            text: text,
            time: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })
          });
          saveMessages(messages);
          renderMessages();
          messageInput.value = '';
          messageInput.focus();
        }
      });

      messageInput.addEventListener('keydown', (e) => {
        if(e.key === 'Enter') {
          sendMessage.click();
        }
      });

      clearMessages.addEventListener('click', () => {
        if(confirm('Clear all love messages?')) {
          localStorage.removeItem('loveMessages');
          renderMessages();
        }
      });

      // Initialize
      renderMessages();
      messageInput.focus();
    })();
  </script>
</body>
</html>
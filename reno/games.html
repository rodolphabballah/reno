<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>Games for Us</title>
  <link rel="stylesheet" href="assets/css/style.css" />
  <!-- Mobile PWA meta tags -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="For Reine">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#ec4899">
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="assets/icons/apple-touch-icon.png">
  <style>
    .gamesApp{min-height:100svh; display:grid; place-items:center; padding:18px}
    .gamesPhone{width:min(390px, 100%); height:100svh; max-height:820px; border-radius:32px; background: rgba(255,255,255,.25); box-shadow: var(--shadow); border:1px solid rgba(255,255,255,.35); backdrop-filter: blur(10px); overflow:hidden; display:flex; flex-direction:column}
    
    /* Navigation styles - matching gallery.html */
    .gallery-nav {
      display: flex;
      gap: 8px;
      padding: 12px 16px;
      position: relative;
      z-index: 2;
      background: rgba(255, 255, 255, 0.25);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.35);
    }

    .gallery-nav__link {
      flex: 1;
      text-align: center;
      padding: 10px 12px;
      border-radius: 14px;
      text-decoration: none;
      font-weight: 900;
      color: rgba(17, 24, 39, 0.75);
      background: rgba(255, 255, 255, 0.55);
      border: 1px solid rgba(17, 24, 39, 0.1);
      transition: all 0.2s ease;
    }

    .gallery-nav__link:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(17, 24, 39, 0.1);
    }

    .gallery-nav__link.is-active {
      border: 0;
      color: white;
      background: linear-gradient(135deg, rgba(236, 72, 153, 0.95), rgba(139, 92, 246, 0.95));
    }

    .gamesScreen{flex:1; overflow:auto; padding:14px 16px 18px}

    /* Games grid layout */
    .gamesGrid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 16px;
      margin-top: 16px;
    }

    /* Each game card */
    .gameCard {
      border-radius: 24px;
      overflow: hidden;
      background: var(--card);
      border: 1px solid rgba(255, 255, 255, 0.45);
      box-shadow: 0 12px 32px rgba(17, 24, 39, 0.12);
      transition: all 0.3s ease;
      position: relative;
    }

    .gameCard:hover {
      transform: translateY(-4px);
      box-shadow: 0 18px 42px rgba(17, 24, 39, 0.18);
    }

    .gameCard__header {
      padding: 20px 20px 16px;
      position: relative;
      overflow: hidden;
    }

    .gameCard__title {
      font-size: 20px;
      font-weight: 950;
      margin: 0 0 8px;
      color: var(--text);
      letter-spacing: 0.2px;
    }

    .gameCard__subtitle {
      font-size: 13px;
      color: var(--muted);
      line-height: 1.4;
      margin: 0;
    }

    .gameCard__icon {
      position: absolute;
      top: 16px;
      right: 16px;
      font-size: 32px;
      opacity: 0.15;
    }

    /* Game 1: Tic-Tac-Toe - Heart vs Rose theme */
    .gameCard--tictactoe .gameCard__header {
      background: linear-gradient(135deg, rgba(236, 72, 153, 0.12), rgba(139, 92, 246, 0.08));
    }

    .gameCard--tictactoe .gameCard__icon {
      color: #ec4899;
    }

    .gameCard__content {
      padding: 0 20px 20px;
    }

    .t3Grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      margin: 12px 0;
    }

    .t3Cell {
      aspect-ratio: 1/1;
      border-radius: 16px;
      border: 2px solid rgba(236, 72, 153, 0.3);
      background: rgba(255, 255, 255, 0.7);
      font-size: 36px;
      font-weight: 900;
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .t3Cell:hover:not(:disabled) {
      background: rgba(255, 255, 255, 0.9);
      border-color: rgba(236, 72, 153, 0.6);
      transform: scale(1.05);
    }

    .t3Cell:disabled {
      cursor: not-allowed;
      opacity: 0.9;
    }

    .t3Cell.heart { color: #ec4899; text-shadow: 0 2px 8px rgba(236, 72, 153, 0.3); }
    .t3Cell.rose { color: #8b5cf6; text-shadow: 0 2px 8px rgba(139, 92, 246, 0.3); }

    .gameControls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 16px;
    }

    .gameControls.center {
      justify-content: center;
      gap: 10px;
    }

    .gameStatus {
      font-weight: 900;
      font-size: 14px;
      color: var(--text);
      padding: 10px 16px;
      border-radius: 14px;
      background: rgba(255, 255, 255, 0.6);
      border: 1px solid rgba(17, 24, 39, 0.1);
      min-width: 140px;
      text-align: center;
    }

    .gameStatus.heart-turn { color: #ec4899; border-color: rgba(236, 72, 153, 0.3); }
    .gameStatus.rose-turn { color: #8b5cf6; border-color: rgba(139, 92, 246, 0.3); }

    .btn-game {
      padding: 10px 20px;
      border-radius: 14px;
      border: 0;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      color: white;
      font-weight: 900;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .btn-game:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(236, 72, 153, 0.3);
    }

    .btn-game.secondary {
      background: rgba(17, 24, 39, 0.1);
      color: var(--text);
    }

    /* Game 2: Love Memory Match */
    .gameCard--memory .gameCard__header {
      background: linear-gradient(135deg, rgba(255, 182, 193, 0.15), rgba(255, 105, 180, 0.1));
    }

    .gameCard--memory .gameCard__icon {
      color: #ff69b4;
    }

    .memoryGrid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
      margin: 12px 0;
    }

    .memoryCard {
      aspect-ratio: 1/1;
      border-radius: 14px;
      background: linear-gradient(135deg, rgba(255, 182, 193, 0.3), rgba(255, 105, 180, 0.2));
      border: 2px solid rgba(255, 255, 255, 0.4);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      cursor: pointer;
      transition: all 0.3s ease;
      transform-style: preserve-3d;
      position: relative;
    }

    .memoryCard.flipped {
      background: rgba(255, 255, 255, 0.9);
      border-color: rgba(236, 72, 153, 0.4);
      transform: rotateY(180deg);
    }

    .memoryCard.matched {
      background: linear-gradient(135deg, rgba(236, 72, 153, 0.3), rgba(139, 92, 246, 0.3));
      border-color: rgba(236, 72, 153, 0.6);
      cursor: default;
    }

    .memoryCard__front,
    .memoryCard__back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 12px;
    }

    .memoryCard__front {
      background: linear-gradient(135deg, rgba(255, 182, 193, 0.3), rgba(255, 105, 180, 0.2));
      color: rgba(17, 24, 39, 0.7);
      font-size: 20px;
      font-weight: 900;
    }

    .memoryCard__back {
      background: rgba(255, 255, 255, 0.95);
      transform: rotateY(180deg);
      font-size: 26px;
    }

    /* Game 3: Love Messages */
    .gameCard--messages .gameCard__header {
      background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 140, 0, 0.08));
    }

    .gameCard--messages .gameCard__icon {
      color: #ff8c00;
    }

    .messageInput {
      width: 100%;
      border-radius: 14px;
      border: 2px solid rgba(236, 72, 153, 0.3);
      background: rgba(255, 255, 255, 0.8);
      padding: 14px 16px;
      font-size: 16px;
      outline: none;
      margin-bottom: 12px;
      transition: all 0.2s ease;
    }

    .messageInput:focus {
      border-color: rgba(236, 72, 153, 0.6);
      box-shadow: 0 0 0 4px rgba(236, 72, 153, 0.15);
    }

    .loveMessages {
      max-height: 200px;
      overflow-y: auto;
      margin-top: 12px;
      padding-right: 8px;
    }

    .loveMessage {
      background: rgba(255, 255, 255, 0.7);
      border-radius: 14px;
      padding: 12px 16px;
      margin-bottom: 10px;
      border-left: 4px solid rgba(236, 72, 153, 0.6);
      position: relative;
      animation: fadeIn 0.5s ease;
    }

    .loveMessage:before {
      content: '‚ù§Ô∏è';
      position: absolute;
      left: -12px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 12px;
    }

    /* NEW GAME: Love Timer */
    .gameCard--timer .gameCard__header {
      background: linear-gradient(135deg, rgba(0, 150, 255, 0.1), rgba(100, 200, 255, 0.08));
    }

    .gameCard--timer .gameCard__icon {
      color: #0096ff;
    }

    .timerDisplay {
      font-size: 48px;
      font-weight: 950;
      text-align: center;
      margin: 20px 0;
      color: var(--text);
      text-shadow: 0 2px 8px rgba(0, 150, 255, 0.2);
    }

    .timerLabel {
      text-align: center;
      font-weight: 800;
      color: var(--muted);
      margin-bottom: 16px;
    }

    .timerButtons {
      display: flex;
      gap: 10px;
      justify-content: center;
      flex-wrap: wrap;
    }

    /* NEW GAME: Heart Tap Challenge */
    .gameCard--tap .gameCard__header {
      background: linear-gradient(135deg, rgba(255, 50, 50, 0.12), rgba(255, 100, 100, 0.08));
    }

    .gameCard--tap .gameCard__icon {
      color: #ff3232;
    }

    .tapArea {
      height: 180px;
      border-radius: 20px;
      background: linear-gradient(135deg, rgba(255, 182, 193, 0.2), rgba(255, 105, 180, 0.15));
      border: 2px dashed rgba(236, 72, 153, 0.4);
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 16px 0;
      cursor: pointer;
      transition: all 0.2s ease;
      position: relative;
      overflow: hidden;
    }

    .tapArea.active {
      background: linear-gradient(135deg, rgba(255, 182, 193, 0.3), rgba(255, 105, 180, 0.25));
      border-color: rgba(236, 72, 153, 0.6);
    }

    .tapArea:hover {
      transform: scale(1.02);
    }

    .tapHeart {
      font-size: 64px;
      animation: pulse 1.5s infinite;
      cursor: pointer;
      user-select: none;
    }

    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }

    .tapStats {
      display: flex;
      justify-content: space-around;
      margin: 16px 0;
    }

    /* NEW GAME: Love Fortune */
    .gameCard--fortune .gameCard__header {
      background: linear-gradient(135deg, rgba(148, 0, 211, 0.12), rgba(186, 85, 211, 0.08));
    }

    .gameCard--fortune .gameCard__icon {
      color: #9400d3;
    }

    .fortuneButton {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      background: linear-gradient(135deg, rgba(148, 0, 211, 0.2), rgba(186, 85, 211, 0.15));
      border: 3px solid rgba(148, 0, 211, 0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 20px auto;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 32px;
    }

    .fortuneButton:hover {
      transform: scale(1.1) rotate(15deg);
      border-color: rgba(148, 0, 211, 0.6);
    }

    .fortuneResult {
      background: rgba(255, 255, 255, 0.8);
      border-radius: 16px;
      padding: 16px;
      margin-top: 16px;
      text-align: center;
      min-height: 80px;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 2px solid rgba(148, 0, 211, 0.2);
    }

    /* NEW GAME: Our Song Player */
    .gameCard--music .gameCard__header {
      background: linear-gradient(135deg, rgba(0, 200, 83, 0.12), rgba(76, 175, 80, 0.08));
    }

    .gameCard--music .gameCard__icon {
      color: #00c853;
    }

    .musicPlayer {
      text-align: center;
    }

    .musicCover {
      width: 120px;
      height: 120px;
      border-radius: 20px;
      background: linear-gradient(135deg, #ec4899, #8b5cf6);
      margin: 0 auto 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 40px;
      color: white;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
    }

    .musicTitle {
      font-weight: 950;
      font-size: 18px;
      margin-bottom: 4px;
    }

    .musicArtist {
      color: var(--muted);
      font-size: 14px;
      margin-bottom: 16px;
    }

    .musicControls {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 16px;
    }

    .musicBtn {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      border: none;
      color: white;
      font-size: 20px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Common animations */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Romantic touches */
    .romanticNote {
      text-align: center;
      margin: 24px 0 16px;
      padding: 16px;
      border-radius: 18px;
      background: linear-gradient(135deg, rgba(255, 182, 193, 0.15), rgba(255, 105, 180, 0.1));
      border: 1px solid rgba(255, 255, 255, 0.4);
      position: relative;
      overflow: hidden;
    }

    .romanticNote:before {
      content: 'üíñ';
      position: absolute;
      top: -10px;
      right: -10px;
      font-size: 40px;
      opacity: 0.1;
    }

    .romanticNote p {
      margin: 0;
      font-weight: 800;
      color: var(--text);
      line-height: 1.5;
    }

    .romanticNote small {
      display: block;
      margin-top: 8px;
      font-size: 12px;
      color: var(--muted);
      font-weight: 700;
    }

    /* Score display */
    .scoreDisplay {
      display: flex;
      justify-content: space-around;
      margin: 16px 0;
      padding: 12px;
      border-radius: 18px;
      background: rgba(255, 255, 255, 0.6);
      border: 1px solid rgba(17, 24, 39, 0.1);
    }

    .scoreItem {
      text-align: center;
    }

    .scoreLabel {
      font-size: 12px;
      font-weight: 800;
      color: var(--muted);
      margin-bottom: 4px;
    }

    .scoreValue {
      font-size: 24px;
      font-weight: 950;
      color: var(--text);
    }

    .scoreValue.heart { color: #ec4899; }
    .scoreValue.rose { color: #8b5cf6; }
  </style>
</head>
<body>
  <main class="app" aria-label="Games">
    <div class="gamesPhone" role="application" aria-label="Games for Us">
      <div class="bgParticles" id="bgParticles" aria-hidden="true"></div>

      <nav class="gallery-nav" aria-label="Main navigation">
        <a href="gallery.html" class="gallery-nav__link">Gallery</a>
        <a href="games.html" class="gallery-nav__link is-active">Games</a>
        <a href="message.html" class="gallery-nav__link">Message</a>
      </nav>

      <section class="gamesScreen">
        <div class="romanticNote">
          <p>Every game we play is another memory we make. ‚ù§Ô∏è</p>
          <small>For Reine & Rodolph - Where love always wins</small>
        </div>

        <div class="gamesGrid">
          <!-- Game 1: Romantic Tic-Tac-Toe -->
          <article class="gameCard gameCard--tictactoe floatA">
            <div class="gameCard__header">
              <h3 class="gameCard__title">Romantic Tic-Tac-Toe</h3>
              <p class="gameCard__subtitle">‚ù§Ô∏è Heart vs üåπ Rose - Our eternal battle</p>
              <div class="gameCard__icon">‚ù§Ô∏è</div>
            </div>
            <div class="gameCard__content">
              <div class="scoreDisplay">
                <div class="scoreItem">
                  <div class="scoreLabel">‚ù§Ô∏è Heart</div>
                  <div class="scoreValue heart" id="heartScore">0</div>
                </div>
                <div class="scoreItem">
                  <div class="scoreLabel">üåπ Rose</div>
                  <div class="scoreValue rose" id="roseScore">0</div>
                </div>
                <div class="scoreItem">
                  <div class="scoreLabel">Draws</div>
                  <div class="scoreValue" id="drawScore">0</div>
                </div>
              </div>
              
              <div class="gameStatus heart-turn" id="t3Status">‚ù§Ô∏è Your turn, my love</div>
              <div class="t3Grid" id="t3Grid"></div>
              <div class="gameControls">
                <button class="btn-game" id="t3Reset" type="button">New Game</button>
                <button class="btn-game secondary" id="t3Undo" type="button">Undo</button>
              </div>
            </div>
          </article>

          <!-- Game 2: Love Memory Match -->
          <article class="gameCard gameCard--memory floatB">
            <div class="gameCard__header">
              <h3 class="gameCard__title">Love Memory Match</h3>
              <p class="gameCard__subtitle">Find matching pairs of our love symbols</p>
              <div class="gameCard__icon">üíû</div>
            </div>
            <div class="gameCard__content">
              <div class="gameStatus" id="memoryStatus">Find all matching pairs</div>
              <div class="memoryGrid" id="memoryGrid"></div>
              <div class="gameControls center">
                <button class="btn-game" id="memoryReset" type="button">Start New Game</button>
              </div>
            </div>
          </article>

          <!-- NEW GAME 3: Love Timer -->
          <article class="gameCard gameCard--timer floatC">
            <div class="gameCard__header">
              <h3 class="gameCard__title">Love Countdown ‚è∞</h3>
              <p class="gameCard__subtitle">Count down to our special moments</p>
              <div class="gameCard__icon">‚è∞</div>
            </div>
            <div class="gameCard__content">
              <div class="timerLabel" id="timerLabel">Next special moment:</div>
              <div class="timerDisplay" id="timerDisplay">00:00</div>
              <div class="timerButtons">
                <button class="btn-game" id="timer5min" type="button">5 Min Date</button>
                <button class="btn-game" id="timer10min" type="button">10 Min Kiss</button>
                <button class="btn-game" id="timer30min" type="button">30 Min Cuddle</button>
              </div>
              <div class="gameControls center" style="margin-top: 16px;">
                <button class="btn-game" id="timerStart" type="button">Start Timer</button>
                <button class="btn-game secondary" id="timerReset" type="button">Reset</button>
              </div>
            </div>
          </article>

          <!-- NEW GAME 4: Heart Tap Challenge -->
          <article class="gameCard gameCard--tap floatA">
            <div class="gameCard__header">
              <h3 class="gameCard__title">Heart Tap Challenge üíñ</h3>
              <p class="gameCard__subtitle">How fast can you tap love?</p>
              <div class="gameCard__icon">üíñ</div>
            </div>
            <div class="gameCard__content">
              <div class="tapStats">
                <div class="scoreItem">
                  <div class="scoreLabel">Score</div>
                  <div class="scoreValue" id="tapScore">0</div>
                </div>
                <div class="scoreItem">
                  <div class="scoreLabel">Time</div>
                  <div class="scoreValue" id="tapTime">30s</div>
                </div>
                <div class="scoreItem">
                  <div class="scoreLabel">Best</div>
                  <div class="scoreValue" id="tapBest">0</div>
                </div>
              </div>
              
              <div class="tapArea" id="tapArea">
                <div class="tapHeart" id="tapHeart">‚ù§Ô∏è</div>
              </div>
              
              <div class="gameStatus" id="tapStatus">Ready to tap some love?</div>
              <div class="gameControls center">
                <button class="btn-game" id="tapStart" type="button">Start Challenge</button>
              </div>
            </div>
          </article>

          <!-- Game 5: Secret Love Messages -->
          <article class="gameCard gameCard--messages floatB">
            <div class="gameCard__header">
              <h3 class="gameCard__title">Secret Love Notes</h3>
              <p class="gameCard__subtitle">Leave sweet messages for each other</p>
              <div class="gameCard__icon">üíå</div>
            </div>
            <div class="gameCard__content">
              <input class="messageInput" id="messageInput" type="text" placeholder="Type a sweet message for your love..." maxlength="100" />
              <div class="gameControls">
                <button class="btn-game" id="sendMessage" type="button">Send Love üíù</button>
                <button class="btn-game secondary" id="clearMessages" type="button">Clear</button>
              </div>
              <div class="loveMessages" id="loveMessages">
                <!-- Messages will appear here -->
              </div>
            </div>
          </article>

          <!-- NEW GAME 6: Love Fortune Teller -->
          <article class="gameCard gameCard--fortune floatC">
            <div class="gameCard__header">
              <h3 class="gameCard__title">Love Fortune Teller üîÆ</h3>
              <p class="gameCard__subtitle">Get romantic predictions for us</p>
              <div class="gameCard__icon">üîÆ</div>
            </div>
            <div class="gameCard__content">
              <div class="fortuneButton" id="fortuneButton">
                üíñ
              </div>
              <div class="fortuneResult" id="fortuneResult">
                Tap the heart to see our romantic fortune...
              </div>
              <div class="gameControls center" style="margin-top: 16px;">
                <button class="btn-game" id="newFortune" type="button">New Fortune</button>
              </div>
            </div>
          </article>

          <!-- NEW GAME 7: Our Song Player -->
          <article class="gameCard gameCard--music floatA">
            <div class="gameCard__header">
              <h3 class="gameCard__title">Our Song Player üéµ</h3>
              <p class="gameCard__subtitle">Play our favorite romantic tunes</p>
              <div class="gameCard__icon">üéµ</div>
            </div>
            <div class="gameCard__content">
              <div class="musicPlayer">
                <div class="musicCover" id="musicCover">üéµ</div>
                <div class="musicTitle" id="musicTitle">Our Love Song</div>
                <div class="musicArtist" id="musicArtist">Reine & Rodolph</div>
                <div class="musicControls">
                  <button class="musicBtn" id="musicPrev" type="button">‚èÆ</button>
                  <button class="musicBtn" id="musicPlay" type="button">‚ñ∂Ô∏è</button>
                  <button class="musicBtn" id="musicNext" type="button">‚è≠</button>
                </div>
              </div>
            </div>
          </article>

        </div>

        <div class="romanticNote" style="margin-top: 20px;">
          <p>"In every game, in every play, my love for you grows stronger every day."</p>
          <small>Forever yours, Rodolph ‚ù§Ô∏è</small>
        </div>
      </section>
    </div>
  </main>

  <script>
    // Background particles
    (() => {
      function spawnBgParticle() {
        const bgParticles = document.getElementById('bgParticles');
        if (!bgParticles) return;
        if (window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches) return;

        const el = document.createElement('span');
        el.className = 'bgParticle';

        const pick = Math.random();
        el.textContent = pick < 0.72 ? '‚ù§' : 'üåπ';

        const x = Math.random() * 100;
        const size = 14 + Math.random() * 20;
        const dur = 5.5 + Math.random() * 5.5;
        const drift = (-16 + Math.random() * 32).toFixed(2) + 'px';
        const rot = (-18 + Math.random() * 36).toFixed(2) + 'deg';

        el.style.setProperty('--x', x.toFixed(2) + '%');
        el.style.setProperty('--size', size.toFixed(0) + 'px');
        el.style.setProperty('--dur', dur.toFixed(2) + 's');
        el.style.setProperty('--drift', drift);
        el.style.setProperty('--rot', rot);

        bgParticles.appendChild(el);

        window.setTimeout(() => {
          el.remove();
        }, Math.ceil(dur * 1000) + 200);
      }

      function startParticles() {
        const bgParticles = document.getElementById('bgParticles');
        if (!bgParticles) return;
        for (let i = 0; i < 8; i++) spawnBgParticle();
        window.setInterval(spawnBgParticle, 420);
      }

      startParticles();
    })();

    // Game 1: Romantic Tic-Tac-Toe
    (() => {
      const t3Grid = document.getElementById('t3Grid');
      const t3Status = document.getElementById('t3Status');
      const t3Reset = document.getElementById('t3Reset');
      const t3Undo = document.getElementById('t3Undo');
      const heartScoreEl = document.getElementById('heartScore');
      const roseScoreEl = document.getElementById('roseScore');
      const drawScoreEl = document.getElementById('drawScore');

      let t3 = Array(9).fill('');
      let turn = '‚ù§Ô∏è';
      let over = false;
      let moveHistory = [];
      let scores = { heart: 0, rose: 0, draw: 0 };

      function updateScores() {
        heartScoreEl.textContent = scores.heart;
        roseScoreEl.textContent = scores.rose;
        drawScoreEl.textContent = scores.draw;
      }

      function t3Winner() {
        const w = [
          [0,1,2],[3,4,5],[6,7,8],
          [0,3,6],[1,4,7],[2,5,8],
          [0,4,8],[2,4,6]
        ];
        for(const [a,b,c] of w) {
          if(t3[a] && t3[a] === t3[b] && t3[a] === t3[c]) return t3[a];
        }
        if(t3.every(x => x)) return 'draw';
        return null;
      }

      function t3Render() {
        t3Grid.innerHTML = '';
        for(let i = 0; i < 9; i++) {
          const btn = document.createElement('button');
          btn.type = 'button';
          btn.className = `t3Cell ${t3[i] === '‚ù§Ô∏è' ? 'heart' : t3[i] === 'üåπ' ? 'rose' : ''}`;
          btn.textContent = t3[i] || '';
          btn.disabled = over || t3[i];
          
          btn.addEventListener('click', () => {
            if(over || t3[i]) return;
            
            moveHistory.push([...t3]);
            t3[i] = turn;
            const win = t3Winner();
            
            if(win) {
              over = true;
              if(win === '‚ù§Ô∏è') {
                scores.heart++;
                t3Status.textContent = '‚ù§Ô∏è Heart wins! My love conquers all!';
                t3Status.className = 'gameStatus heart-turn';
              } else if(win === 'üåπ') {
                scores.rose++;
                t3Status.textContent = 'üåπ Rose wins! Beautiful like you!';
                t3Status.className = 'gameStatus rose-turn';
              } else {
                scores.draw++;
                t3Status.textContent = 'Draw! Our love is perfectly balanced ‚ù§Ô∏èüåπ';
                t3Status.className = 'gameStatus';
              }
              updateScores();
            } else {
              turn = turn === '‚ù§Ô∏è' ? 'üåπ' : '‚ù§Ô∏è';
              t3Status.textContent = turn === '‚ù§Ô∏è' ? '‚ù§Ô∏è Your turn, my heart' : 'üåπ Your turn, beautiful rose';
              t3Status.className = turn === '‚ù§Ô∏è' ? 'gameStatus heart-turn' : 'gameStatus rose-turn';
            }
            t3Render();
          });
          t3Grid.appendChild(btn);
        }
      }

      t3Reset.addEventListener('click', () => {
        t3 = Array(9).fill('');
        turn = '‚ù§Ô∏è';
        over = false;
        moveHistory = [];
        t3Status.textContent = '‚ù§Ô∏è Your turn, my love';
        t3Status.className = 'gameStatus heart-turn';
        t3Render();
      });

      t3Undo.addEventListener('click', () => {
        if(moveHistory.length > 0) {
          t3 = moveHistory.pop();
          turn = turn === '‚ù§Ô∏è' ? 'üåπ' : '‚ù§Ô∏è';
          over = false;
          t3Status.textContent = turn === '‚ù§Ô∏è' ? '‚ù§Ô∏è Your turn (undone)' : 'üåπ Your turn (undone)';
          t3Status.className = turn === '‚ù§Ô∏è' ? 'gameStatus heart-turn' : 'gameStatus rose-turn';
          t3Render();
        }
      });

      t3Render();
      updateScores();
    })();

    // Game 2: Love Memory Match
    (() => {
      const memoryGrid = document.getElementById('memoryGrid');
      const memoryStatus = document.getElementById('memoryStatus');
      const memoryReset = document.getElementById('memoryReset');

      const symbols = ['‚ù§Ô∏è', 'üåπ', 'üíï', 'üíñ', 'üíò', 'üíù', 'üíû', 'üíó'];
      let cards = [...symbols, ...symbols];
      let flippedCards = [];
      let matchedCards = [];
      let canFlip = true;

      function shuffle(array) {
        for(let i = array.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
      }

      function createMemoryGame() {
        memoryGrid.innerHTML = '';
        flippedCards = [];
        matchedCards = [];
        canFlip = true;
        cards = shuffle([...symbols, ...symbols]);
        
        cards.forEach((symbol, index) => {
          const card = document.createElement('div');
          card.className = 'memoryCard';
          card.dataset.index = index;
          card.dataset.symbol = symbol;
          
          const front = document.createElement('div');
          front.className = 'memoryCard__front';
          front.textContent = '?';
          
          const back = document.createElement('div');
          back.className = 'memoryCard__back';
          back.textContent = symbol;
          
          card.appendChild(front);
          card.appendChild(back);
          
          card.addEventListener('click', () => flipCard(card));
          memoryGrid.appendChild(card);
        });
        
        memoryStatus.textContent = 'Find matching pairs of love';
      }

      function flipCard(card) {
        if(!canFlip || card.classList.contains('flipped') || card.classList.contains('matched')) return;
        
        card.classList.add('flipped');
        flippedCards.push(card);
        
        if(flippedCards.length === 2) {
          canFlip = false;
          const [card1, card2] = flippedCards;
          
          if(card1.dataset.symbol === card2.dataset.symbol) {
            card1.classList.add('matched');
            card2.classList.add('matched');
            matchedCards.push(card1, card2);
            memoryStatus.textContent = `Perfect match! ${card1.dataset.symbol} ${card2.dataset.symbol}`;
            
            setTimeout(() => {
              flippedCards = [];
              canFlip = true;
              
              if(matchedCards.length === cards.length) {
                memoryStatus.textContent = 'You found all the love! ‚ù§Ô∏è Perfect match!';
                setTimeout(() => {
                  createMemoryGame();
                }, 2000);
              }
            }, 800);
          } else {
            memoryStatus.textContent = 'Not a match, but our love always is ‚ù§Ô∏è';
            setTimeout(() => {
              card1.classList.remove('flipped');
              card2.classList.remove('flipped');
              flippedCards = [];
              canFlip = true;
            }, 1000);
          }
        } else {
          memoryStatus.textContent = `Pick another card to match ${flippedCards[0].dataset.symbol}`;
        }
      }

      memoryReset.addEventListener('click', createMemoryGame);
      createMemoryGame();
    })();

    // NEW GAME 3: Love Timer
    (() => {
      const timerDisplay = document.getElementById('timerDisplay');
      const timerLabel = document.getElementById('timerLabel');
      const timerStart = document.getElementById('timerStart');
      const timerReset = document.getElementById('timerReset');
      const timer5min = document.getElementById('timer5min');
      const timer10min = document.getElementById('timer10min');
      const timer30min = document.getElementById('timer30min');

      let countdown;
      let timeLeft = 0;
      let timerRunning = false;

      const romanticMoments = [
        { time: 300, label: "5 Min Date üíï", message: "Time for a quick romantic date!" },
        { time: 600, label: "10 Min Kiss üíã", message: "Perfect time for a sweet kiss!" },
        { time: 1800, label: "30 Min Cuddle ü•∞", message: "Snuggle time with my love!" }
      ];

      function formatTime(seconds) {
        const mins = Math.floor(seconds / 60);
        const secs = seconds % 60;
        return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
      }

      function updateTimer() {
        timerDisplay.textContent = formatTime(timeLeft);
        
        if (timeLeft <= 0) {
          clearInterval(countdown);
          timerRunning = false;
          timerStart.textContent = "Start Timer";
          timerDisplay.style.color = "#ec4899";
          timerLabel.textContent = "Time's up! üíñ";
          
          // Play romantic sound notification
          playTimerComplete();
        } else if (timeLeft <= 10) {
          timerDisplay.style.color = "#ff3232";
          timerLabel.textContent = "Almost there! ‚ù§Ô∏è";
        } else {
          timerDisplay.style.color = "var(--text)";
        }
      }

      function startTimer(duration, label, message) {
        if (timerRunning) {
          clearInterval(countdown);
          timerRunning = false;
          timerStart.textContent = "Start Timer";
          return;
        }

        timeLeft = duration;
        timerLabel.textContent = message || label;
        timerRunning = true;
        timerStart.textContent = "Pause Timer";
        
        updateTimer();
        
        countdown = setInterval(() => {
          timeLeft--;
          updateTimer();
        }, 1000);
      }

      function playTimerComplete() {
        // Create a simple notification sound
        try {
          const audioContext = new (window.AudioContext || window.webkitAudioContext)();
          const oscillator = audioContext.createOscillator();
          const gainNode = audioContext.createGain();
          
          oscillator.connect(gainNode);
          gainNode.connect(audioContext.destination);
          
          oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime); // C5
          oscillator.frequency.setValueAtTime(659.25, audioContext.currentTime + 0.1); // E5
          oscillator.frequency.setValueAtTime(783.99, audioContext.currentTime + 0.2); // G5
          
          gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
          gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
          
          oscillator.start(audioContext.currentTime);
          oscillator.stop(audioContext.currentTime + 0.5);
        } catch (e) {
          console.log("Audio not supported");
        }
      }

      timer5min.addEventListener('click', () => {
        if (timerRunning) return;
        timeLeft = 300;
        updateTimer();
        timerLabel.textContent = romanticMoments[0].message;
      });

      timer10min.addEventListener('click', () => {
        if (timerRunning) return;
        timeLeft = 600;
        updateTimer();
        timerLabel.textContent = romanticMoments[1].message;
      });

      timer30min.addEventListener('click', () => {
        if (timerRunning) return;
        timeLeft = 1800;
        updateTimer();
        timerLabel.textContent = romanticMoments[2].message;
      });

      timerStart.addEventListener('click', () => {
        if (timeLeft <= 0) {
          timeLeft = 300; // Default 5 minutes
          timerLabel.textContent = romanticMoments[0].message;
        }
        startTimer(timeLeft, timerLabel.textContent);
      });

      timerReset.addEventListener('click', () => {
        clearInterval(countdown);
        timerRunning = false;
        timeLeft = 0;
        timerStart.textContent = "Start Timer";
        timerLabel.textContent = "Next special moment:";
        timerDisplay.textContent = "00:00";
        timerDisplay.style.color = "var(--text)";
      });

      // Initialize
      updateTimer();
    })();

    // NEW GAME 4: Heart Tap Challenge
    (() => {
      const tapArea = document.getElementById('tapArea');
      const tapHeart = document.getElementById('tapHeart');
      const tapScoreEl = document.getElementById('tapScore');
      const tapTimeEl = document.getElementById('tapTime');
      const tapBestEl = document.getElementById('tapBest');
      const tapStatus = document.getElementById('tapStatus');
      const tapStart = document.getElementById('tapStart');

      let score = 0;
      let timeLeft = 30;
      let bestScore = localStorage.getItem('tapBest') || 0;
      let gameActive = false;
      let timer;

      tapBestEl.textContent = bestScore;

      function updateDisplay() {
        tapScoreEl.textContent = score;
        tapTimeEl.textContent = `${timeLeft}s`;
      }

      function startGame() {
        if (gameActive) return;
        
        score = 0;
        timeLeft = 30;
        gameActive = true;
        tapArea.classList.add('active');
        tapStart.textContent = "Playing...";
        tapStatus.textContent = "Tap the heart as fast as you can! üíñ";
        
        updateDisplay();
        
        timer = setInterval(() => {
          timeLeft--;
          updateDisplay();
          
          if (timeLeft <= 0) {
            endGame();
          }
        }, 1000);
      }

      function endGame() {
        clearInterval(timer);
        gameActive = false;
        tapArea.classList.remove('active');
        tapStart.textContent = "Start Challenge";
        
        if (score > bestScore) {
          bestScore = score;
          localStorage.setItem('tapBest', bestScore);
          tapBestEl.textContent = bestScore;
          tapStatus.textContent = `New record! ${score} taps! üéâ`;
        } else {
          tapStatus.textContent = `Time's up! Score: ${score} taps!`;
        }
      }

      tapHeart.addEventListener('click', () => {
        if (!gameActive) return;
        
        score++;
        updateDisplay();
        
        // Add visual feedback
        tapHeart.style.transform = 'scale(1.2)';
        setTimeout(() => {
          tapHeart.style.transform = 'scale(1)';
        }, 100);
        
        // Change heart color occasionally
        if (score % 10 === 0) {
          const hearts = ['‚ù§Ô∏è', 'üíñ', 'üíó', 'üíì', 'üíû', 'üíï'];
          tapHeart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
        }
      });

      tapStart.addEventListener('click', startGame);
      
      // Initialize
      updateDisplay();
    })();

    // Game 5: Secret Love Messages
    (() => {
      const messageInput = document.getElementById('messageInput');
      const sendMessage = document.getElementById('sendMessage');
      const clearMessages = document.getElementById('clearMessages');
      const loveMessages = document.getElementById('loveMessages');

      const romanticMessages = [];

      function saveMessages(messages) {
        localStorage.setItem('loveMessages', JSON.stringify(messages));
      }

      function loadMessages() {
        const saved = localStorage.getItem('loveMessages');
        return saved ? JSON.parse(saved) : [];
      }

      function renderMessages() {
        const messages = loadMessages();
        loveMessages.innerHTML = '';
        
        // Show empty state if no messages
        if (messages.length === 0) {
          const emptyMsg = document.createElement('div');
          emptyMsg.className = 'loveMessage';
          emptyMsg.style.opacity = '0.6';
          emptyMsg.style.fontStyle = 'italic';
          emptyMsg.innerHTML = `
            <div style="font-weight: 700; margin-bottom: 4px;">The love notes box is empty...</div>
            <div style="font-size: 11px; color: var(--muted);">Write your first sweet message above üíù</div>
          `;
          loveMessages.appendChild(emptyMsg);
          return;
        }
        
        messages.forEach(msg => {
          const messageEl = document.createElement('div');
          messageEl.className = 'loveMessage';
          messageEl.innerHTML = `
            <div style="font-weight: 800; margin-bottom: 4px;">${msg.text}</div>
            <div style="font-size: 11px; color: var(--muted);">${msg.time}</div>
          `;
          loveMessages.appendChild(messageEl);
        });
        
        loveMessages.scrollTop = loveMessages.scrollHeight;
      }

      sendMessage.addEventListener('click', () => {
        const text = messageInput.value.trim();
        if(text) {
          const messages = loadMessages();
          messages.push({
            text: text,
            time: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })
          });
          saveMessages(messages);
          renderMessages();
          messageInput.value = '';
          messageInput.focus();
        }
      });

      messageInput.addEventListener('keydown', (e) => {
        if(e.key === 'Enter') {
          sendMessage.click();
        }
      });

      clearMessages.addEventListener('click', () => {
        if(confirm('Clear all love messages?')) {
          localStorage.removeItem('loveMessages');
          renderMessages();
        }
      });

      // Initialize
      renderMessages();
      messageInput.focus();
    })();

    // NEW GAME 6: Love Fortune Teller
    (() => {
      const fortuneButton = document.getElementById('fortuneButton');
      const fortuneResult = document.getElementById('fortuneResult');
      const newFortune = document.getElementById('newFortune');

      const fortunes = [
        "Your love will grow stronger every day! üåü",
        "A romantic surprise is coming your way! üíù",
        "Your bond will deepen with each passing moment! üíë",
        "A special memory will be created soon! üì∏",
        "Your hearts will beat as one forever! üíì",
        "Love will find new ways to blossom between you! üå∑",
        "Your connection will withstand all tests! üí™",
        "A sweet moment of tenderness awaits! ü•∞",
        "Your love story will inspire others! üìñ",
        "The universe conspires to bring you closer! ‚ú®",
        "Your souls were meant to find each other! üí´",
        "Every day with love is a blessing counted! üôè",
        "Your laughter will echo through happy years! üòÑ",
        "Small gestures will mean the world to you both! üéÅ",
        "Your love is written in the stars! üåå"
      ];

      function getRandomFortune() {
        return fortunes[Math.floor(Math.random() * fortunes.length)];
      }

      function showFortune() {
        fortuneButton.style.transform = 'scale(0.9)';
        fortuneResult.style.opacity = '0.5';
        
        setTimeout(() => {
          const fortune = getRandomFortune();
          fortuneResult.textContent = fortune;
          fortuneResult.style.opacity = '1';
          fortuneButton.style.transform = 'scale(1)';
          
          // Change button icon
          const icons = ['üíñ', 'üíï', 'üíó', 'üíì', 'üíû', 'üíò', 'üíù'];
          fortuneButton.textContent = icons[Math.floor(Math.random() * icons.length)];
        }, 300);
      }

      fortuneButton.addEventListener('click', showFortune);
      newFortune.addEventListener('click', showFortune);
      
      // Initialize with first fortune
      fortuneResult.textContent = "Tap the heart to see our romantic fortune...";
    })();

    // NEW GAME 7: Our Song Player
    (() => {
      const musicCover = document.getElementById('musicCover');
      const musicTitle = document.getElementById('musicTitle');
      const musicArtist = document.getElementById('musicArtist');
      const musicPlay = document.getElementById('musicPlay');
      const musicPrev = document.getElementById('musicPrev');
      const musicNext = document.getElementById('musicNext');

      const songs = [
        { title: "Our Love Song", artist: "Reine & Rodolph", emoji: "üéµ" },
        { title: "Heartbeat Melody", artist: "Forever Us", emoji: "üíì" },
        { title: "Eternal Romance", artist: "Two Souls", emoji: "üíë" },
        { title: "Sweet Serenade", artist: "Love's Harmony", emoji: "üé∂" },
        { title: "Dancing Stars", artist: "Night Sky Duet", emoji: "‚ú®" }
      ];

      let currentSong = 0;
      let isPlaying = false;

      function updateSong() {
        const song = songs[currentSong];
        musicTitle.textContent = song.title;
        musicArtist.textContent = song.artist;
        musicCover.textContent = song.emoji;
        
        // Change cover gradient based on song
        const gradients = [
          "linear-gradient(135deg, #ec4899, #8b5cf6)",
          "linear-gradient(135deg, #ff69b4, #ff1493)",
          "linear-gradient(135deg, #00c853, #0096ff)",
          "linear-gradient(135deg, #ff8c00, #ffd700)",
          "linear-gradient(135deg, #9400d3, #4b0082)"
        ];
        musicCover.style.background = gradients[currentSong];
      }

      function playPause() {
        isPlaying = !isPlaying;
        musicPlay.textContent = isPlaying ? "‚è∏Ô∏è" : "‚ñ∂Ô∏è";
        
        if (isPlaying) {
          musicCover.style.animation = "pulse 1.5s infinite";
        } else {
          musicCover.style.animation = "none";
        }
      }

      function nextSong() {
        currentSong = (currentSong + 1) % songs.length;
        updateSong();
        if (isPlaying) {
          // Reset animation
          musicCover.style.animation = "none";
          setTimeout(() => {
            musicCover.style.animation = "pulse 1.5s infinite";
          }, 10);
        }
      }

      function prevSong() {
        currentSong = (currentSong - 1 + songs.length) % songs.length;
        updateSong();
        if (isPlaying) {
          musicCover.style.animation = "none";
          setTimeout(() => {
            musicCover.style.animation = "pulse 1.5s infinite";
          }, 10);
        }
      }

      musicPlay.addEventListener('click', playPause);
      musicNext.addEventListener('click', nextSong);
      musicPrev.addEventListener('click', prevSong);

      // Initialize
      updateSong();
    })();
  </script>
</body>
</html>